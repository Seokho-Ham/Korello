{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useUpdateApi,useDeleteApi}from'../../api/index';var ChecklistForm=function ChecklistForm(_ref){var el=_ref.el,setUpdate=_ref.setUpdate;var _useUpdateApi=useUpdateApi(),_useUpdateApi2=_slicedToArray(_useUpdateApi,1),updateData=_useUpdateApi2[0];var _useDeleteApi=useDeleteApi(),_useDeleteApi2=_slicedToArray(_useDeleteApi,1),deleteData=_useDeleteApi2[0];var _useState=useState(el.title),_useState2=_slicedToArray(_useState,2),newTitle=_useState2[0],setNewTitle=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),changeButton=_useState4[0],setChangebutton=_useState4[1];var onChangeTitle=function onChangeTitle(e){setNewTitle(e.target.value);};var checkboxHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var code;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return updateData(\"/todo/\".concat(e.target.name,\"/status\"));case 2:code=_context.sent;if(code===200){setUpdate(function(p){return!p;});}else{alert('실패');setUpdate(function(p){return!p;});}case 4:case\"end\":return _context.stop();}}},_callee);}));return function checkboxHandler(_x){return _ref2.apply(this,arguments);};}();var changeChecklist=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var code;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!changeButton){_context2.next=11;break;}if(!(newTitle.length>0&&newTitle!==el.title)){_context2.next=8;break;}_context2.next=4;return updateData(\"/todo/\".concat(el.todoId),{title:newTitle});case 4:code=_context2.sent;if(code===200){setChangebutton(false);setUpdate(function(p){return!p;});}else{alert('실패');setUpdate(function(p){return!p;});}_context2.next=9;break;case 8:setChangebutton(function(p){return!p;});case 9:_context2.next=12;break;case 11:setChangebutton(function(p){return!p;});case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function changeChecklist(){return _ref3.apply(this,arguments);};}();var deleteCheckList=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var code;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return deleteData(\"/todo/\".concat(el.todoId));case 2:code=_context3.sent;if(code===200){setUpdate(function(p){return!p;});}else{alert('실패');setUpdate(function(p){return!p;});}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteCheckList(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"checklist-item\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:el.todoId,checked:el.status,onChange:checkboxHandler}),changeButton?/*#__PURE__*/_jsxs(\"span\",{className:\"checklist-item-title\",children:[/*#__PURE__*/_jsx(\"input\",{value:newTitle,onChange:onChangeTitle}),/*#__PURE__*/_jsx(\"button\",{onClick:changeChecklist,children:\"\\uC218\\uC815\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"checklist-item-title\",onClick:changeChecklist,children:el.title}),/*#__PURE__*/_jsx(\"button\",{className:\"checklist-delete\",onClick:deleteCheckList,children:\"X\"})]})});};export default ChecklistForm;","map":{"version":3,"sources":["/Users/cocoball/Korello/src/components/modal/ChecklistForm.jsx"],"names":["React","useState","useUpdateApi","useDeleteApi","ChecklistForm","el","setUpdate","updateData","deleteData","title","newTitle","setNewTitle","changeButton","setChangebutton","onChangeTitle","e","target","value","checkboxHandler","name","code","p","alert","changeChecklist","length","todoId","deleteCheckList","status"],"mappings":"ojBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,iBAA3C,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAuB,IAApBC,CAAAA,EAAoB,MAApBA,EAAoB,CAAhBC,SAAgB,MAAhBA,SAAgB,mBACtBJ,YAAY,EADU,gDACpCK,UADoC,qCAEtBJ,YAAY,EAFU,gDAEpCK,UAFoC,iCAGXP,QAAQ,CAACI,EAAE,CAACI,KAAJ,CAHG,wCAGpCC,QAHoC,eAG1BC,WAH0B,8BAIHV,QAAQ,CAAC,KAAD,CAJL,yCAIpCW,YAJoC,eAItBC,eAJsB,eAK3C,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,CAAC,CAAI,CACzBJ,WAAW,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,CACD,CAFD,CAGA,GAAMC,CAAAA,eAAe,2FAAG,iBAAMH,CAAN,iJACHR,CAAAA,UAAU,iBAAUQ,CAAC,CAACC,MAAF,CAASG,IAAnB,YADP,QAChBC,IADgB,eAEtB,GAAIA,IAAI,GAAK,GAAb,CAAkB,CAChBd,SAAS,CAAC,SAAAe,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAFD,IAEO,CACLC,KAAK,CAAC,IAAD,CAAL,CACAhB,SAAS,CAAC,SAAAe,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAPqB,sDAAH,kBAAfH,CAAAA,eAAe,6CAArB,CASA,GAAMK,CAAAA,eAAe,2FAAG,qJAClBX,YADkB,gCAEhBF,QAAQ,CAACc,MAAT,CAAkB,CAAlB,EAAuBd,QAAQ,GAAKL,EAAE,CAACI,KAFvB,kDAGCF,CAAAA,UAAU,iBAAUF,EAAE,CAACoB,MAAb,EAAuB,CAClDhB,KAAK,CAAEC,QAD2C,CAAvB,CAHX,QAGZU,IAHY,gBAOlB,GAAIA,IAAI,GAAK,GAAb,CAAkB,CAChBP,eAAe,CAAC,KAAD,CAAf,CACAP,SAAS,CAAC,SAAAe,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAHD,IAGO,CACLC,KAAK,CAAC,IAAD,CAAL,CACAhB,SAAS,CAAC,SAAAe,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAbiB,8BAelBR,eAAe,CAAC,SAAAQ,CAAC,QAAI,CAACA,CAAL,EAAF,CAAf,CAfkB,uCAkBpBR,eAAe,CAAC,SAAAQ,CAAC,QAAI,CAACA,CAAL,EAAF,CAAf,CAlBoB,yDAAH,kBAAfE,CAAAA,eAAe,2CAArB,CAqBA,GAAMG,CAAAA,eAAe,2FAAG,wKACHlB,CAAAA,UAAU,iBAAUH,EAAE,CAACoB,MAAb,EADP,QAChBL,IADgB,gBAEtB,GAAIA,IAAI,GAAK,GAAb,CAAkB,CAChBd,SAAS,CAAC,SAAAe,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAFD,IAEO,CACLC,KAAK,CAAC,IAAD,CAAL,CACAhB,SAAS,CAAC,SAAAe,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAPqB,wDAAH,kBAAfK,CAAAA,eAAe,2CAArB,CAUA,mBACE,YAAK,SAAS,CAAC,gBAAf,uBACE,wCACE,cACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAErB,EAAE,CAACoB,MAFX,CAGE,OAAO,CAAEpB,EAAE,CAACsB,MAHd,CAIE,QAAQ,CAAET,eAJZ,EADF,CAOGN,YAAY,cACX,cAAM,SAAS,CAAC,sBAAhB,wBACE,cAAO,KAAK,CAAEF,QAAd,CAAwB,QAAQ,CAAEI,aAAlC,EADF,cAEE,eAAQ,OAAO,CAAES,eAAjB,0BAFF,GADW,cAMX,aAAM,SAAS,CAAC,sBAAhB,CAAuC,OAAO,CAAEA,eAAhD,UACGlB,EAAE,CAACI,KADN,EAbJ,cAiBE,eAAQ,SAAS,CAAC,kBAAlB,CAAqC,OAAO,CAAEiB,eAA9C,eAjBF,GADF,EADF,CAyBD,CAzED,CA2EA,cAAetB,CAAAA,aAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useUpdateApi, useDeleteApi } from '../../api/index';\n\nconst ChecklistForm = ({ el, setUpdate }) => {\n  const [updateData] = useUpdateApi();\n  const [deleteData] = useDeleteApi();\n  const [newTitle, setNewTitle] = useState(el.title);\n  const [changeButton, setChangebutton] = useState(false);\n  const onChangeTitle = e => {\n    setNewTitle(e.target.value);\n  };\n  const checkboxHandler = async e => {\n    const code = await updateData(`/todo/${e.target.name}/status`);\n    if (code === 200) {\n      setUpdate(p => !p);\n    } else {\n      alert('실패');\n      setUpdate(p => !p);\n    }\n  };\n  const changeChecklist = async () => {\n    if (changeButton) {\n      if (newTitle.length > 0 && newTitle !== el.title) {\n        const code = await updateData(`/todo/${el.todoId}`, {\n          title: newTitle,\n        });\n\n        if (code === 200) {\n          setChangebutton(false);\n          setUpdate(p => !p);\n        } else {\n          alert('실패');\n          setUpdate(p => !p);\n        }\n      } else {\n        setChangebutton(p => !p);\n      }\n    } else {\n      setChangebutton(p => !p);\n    }\n  };\n  const deleteCheckList = async () => {\n    const code = await deleteData(`/todo/${el.todoId}`);\n    if (code === 200) {\n      setUpdate(p => !p);\n    } else {\n      alert('실패');\n      setUpdate(p => !p);\n    }\n  };\n\n  return (\n    <div className='checklist-item'>\n      <>\n        <input\n          type='checkbox'\n          name={el.todoId}\n          checked={el.status}\n          onChange={checkboxHandler}\n        />\n        {changeButton ? (\n          <span className='checklist-item-title'>\n            <input value={newTitle} onChange={onChangeTitle} />\n            <button onClick={changeChecklist}>수정</button>\n          </span>\n        ) : (\n          <span className='checklist-item-title' onClick={changeChecklist}>\n            {el.title}\n          </span>\n        )}\n        <button className='checklist-delete' onClick={deleteCheckList}>\n          X\n        </button>\n      </>\n    </div>\n  );\n};\n\nexport default ChecklistForm;\n"]},"metadata":{},"sourceType":"module"}