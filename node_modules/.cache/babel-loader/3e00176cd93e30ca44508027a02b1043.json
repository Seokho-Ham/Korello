{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/cocoball/korello-practice/korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cocoball/korello-practice/korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cocoball/korello-practice/korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{usePostApi,useGetApi}from'../../api/index';import colors from'../../assets/colors';var Label=function Label(_ref){var id=_ref.id,url=_ref.url,modalUpdate=_ref.modalUpdate,setModalUpdate=_ref.setModalUpdate,setUpdate=_ref.setUpdate,labels=_ref.labels;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openLabel=_useState2[0],setOpenLabel=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),selectColor=_useState4[0],setSelectColor=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),labelName=_useState6[0],setLabelName=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),display=_useState8[0],setDisplay=_useState8[1];var _usePostApi=usePostApi(),_usePostApi2=_slicedToArray(_usePostApi,1),postData=_usePostApi2[0];var _useGetApi=useGetApi('get',url.slice(0,url.length-6)+'/label',modalUpdate),_useGetApi2=_slicedToArray(_useGetApi,1),data=_useGetApi2[0];var onChangeHandler=function onChangeHandler(e){setLabelName(e.target.value);};var openLabelButton=function openLabelButton(){setOpenLabel(function(p){return!p;});};var selectButton=function selectButton(e){setSelectColor(e.target.className);};var handleDisplay=function handleDisplay(){setDisplay(function(p){return!p;});};var deleteLabel=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function deleteLabel(_x){return _ref2.apply(this,arguments);};}();var addBoardLabelButton=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var code;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(labelName.length>0&&selectColor.length>0)){_context2.next=7;break;}_context2.next=3;return postData(url.slice(0,url.length-6)+'/label',{name:labelName,color:selectColor});case 3:code=_context2.sent;if(code===201){setSelectColor('');setLabelName('');setDisplay(function(p){return!p;});setModalUpdate(function(p){return!p;});}else{alert('추가 실패');}_context2.next=8;break;case 7:alert('이름과 색을 정해주세요!');case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function addBoardLabelButton(){return _ref3.apply(this,arguments);};}();var checkOverlap=function checkOverlap(arr,id){var result=false;arr.map(function(el){if(el.id===id){result=true;}});return result;};var addCardLabelButton=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var code;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!checkOverlap(labels,e.target.id)){_context3.next=6;break;}_context3.next=3;return postData(\"/card/\".concat(id,\"/label/delete\"),{labelIds:[e.target.id]});case 3:_context3.t0=_context3.sent;_context3.next=9;break;case 6:_context3.next=8;return postData(\"/card/\".concat(id,\"/label\"),{labelId:e.target.id});case 8:_context3.t0=_context3.sent;case 9:code=_context3.t0;if(code===201||code===200){setUpdate(function(p){return!p;});}else{alert('실패');setUpdate(function(p){return!p;});}case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function addCardLabelButton(_x2){return _ref4.apply(this,arguments);};}();var newRenderColors=function newRenderColors(){var colorlist={};data.map(function(el){colorlist[el.color]=data.indexOf(el);});return colors.map(function(el,i){if(colorlist[el.color]!==undefined){var value=data[colorlist[el.color]];return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"span\",{// key={i}\nid:value.id,className:value.color,style:{backgroundColor:value.color,color:'#fff',display:'block',// float: 'left',\nmargin:'2px',width:'160px',height:'20px',padding:'3px',cursor:'pointer',borderRadius:'3px'},onClick:addCardLabelButton,children:value.name}),/*#__PURE__*/_jsx(\"button\",{name:value.id,onClick:deleteLabel,style:{float:'right'},children:\"X\"})]},i);}else{return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex'},children:/*#__PURE__*/_jsx(\"span\",{// key={i}\nclassName:el.color,style:{backgroundColor:el.color,color:'#fff',display:'inline-block',margin:'1px',padding:'3px',width:'160px',height:'20px',cursor:'pointer',borderRadius:'3px'},onClick:selectButton})},i);}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-card-label-button\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:openLabelButton,children:\"Label\"}),openLabel?/*#__PURE__*/_jsxs(\"div\",{className:\"label-modal\",style:{overflow:'auto'},children:[newRenderColors(),/*#__PURE__*/_jsxs(\"div\",{className:\"label-form\",style:{display:display?'block':'none'},children:[/*#__PURE__*/_jsx(\"input\",{value:labelName,onChange:onChangeHandler,style:{backgroundColor:selectColor,width:'160px',borderRadius:'3px',color:selectColor===''?'black':'#fff'},placeholder:\"title\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addBoardLabelButton,children:\"Add Label\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDisplay,children:\"Cancel\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDisplay,style:{display:display?'none':'block'},children:\"Add Label\"})]}):null]});};export default Label;","map":{"version":3,"sources":["/Users/cocoball/korello-practice/korello/src/components/modal/Label.jsx"],"names":["React","useState","usePostApi","useGetApi","colors","Label","id","url","modalUpdate","setModalUpdate","setUpdate","labels","openLabel","setOpenLabel","selectColor","setSelectColor","labelName","setLabelName","display","setDisplay","postData","slice","length","data","onChangeHandler","e","target","value","openLabelButton","p","selectButton","className","handleDisplay","deleteLabel","addBoardLabelButton","name","color","code","alert","checkOverlap","arr","result","map","el","addCardLabelButton","labelIds","labelId","newRenderColors","colorlist","indexOf","i","undefined","backgroundColor","margin","width","height","padding","cursor","borderRadius","float","overflow"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { usePostApi, useGetApi } from '../../api/index';\nimport colors from '../../assets/colors';\n\nconst Label = ({ id, url, modalUpdate, setModalUpdate, setUpdate, labels }) => {\n  const [openLabel, setOpenLabel] = useState(false);\n  const [selectColor, setSelectColor] = useState('');\n  const [labelName, setLabelName] = useState('');\n  const [display, setDisplay] = useState(false);\n  const [postData] = usePostApi();\n  const [data] = useGetApi(\n    'get',\n    url.slice(0, url.length - 6) + '/label',\n    modalUpdate,\n  );\n\n  const onChangeHandler = e => {\n    setLabelName(e.target.value);\n  };\n  const openLabelButton = () => {\n    setOpenLabel(p => !p);\n  };\n  const selectButton = e => {\n    setSelectColor(e.target.className);\n  };\n  const handleDisplay = () => {\n    setDisplay(p => !p);\n  };\n\n  const deleteLabel = async e => {\n    // console.log(e.target.name);\n    // console.log(url);\n    // const code = await postData(\n    //   url.slice(0, url.length - 6) + '/label/delete',\n    //   {\n    //     labelsIds: e.target.name,\n    //   },\n    // );\n    // if (code === 200) {\n    //   setSelectColor('');\n    //   setLabelName('');\n    // } else {\n    //   alert('삭제 실패');\n    // }\n  };\n\n  const addBoardLabelButton = async () => {\n    if (labelName.length > 0 && selectColor.length > 0) {\n      const code = await postData(url.slice(0, url.length - 6) + '/label', {\n        name: labelName,\n        color: selectColor,\n      });\n\n      if (code === 201) {\n        setSelectColor('');\n        setLabelName('');\n        setDisplay(p => !p);\n        setModalUpdate(p => !p);\n      } else {\n        alert('추가 실패');\n      }\n    } else {\n      alert('이름과 색을 정해주세요!');\n    }\n  };\n\n  const checkOverlap = (arr, id) => {\n    let result = false;\n    arr.map(el => {\n      if (el.id === id) {\n        result = true;\n      }\n    });\n    return result;\n  };\n\n  const addCardLabelButton = async e => {\n    const code = checkOverlap(labels, e.target.id)\n      ? await postData(`/card/${id}/label/delete`, {\n          labelIds: [e.target.id],\n        })\n      : await postData(`/card/${id}/label`, {\n          labelId: e.target.id,\n        });\n\n    if (code === 201 || code === 200) {\n      setUpdate(p => !p);\n    } else {\n      alert('실패');\n      setUpdate(p => !p);\n    }\n  };\n\n  const newRenderColors = () => {\n    let colorlist = {};\n    data.map(el => {\n      colorlist[el.color] = data.indexOf(el);\n    });\n\n    return colors.map((el, i) => {\n      if (colorlist[el.color] !== undefined) {\n        let value = data[colorlist[el.color]];\n\n        return (\n          <div\n            key={i}\n            style={{\n              display: 'flex',\n            }}\n          >\n            <span\n              // key={i}\n              id={value.id}\n              className={value.color}\n              style={{\n                backgroundColor: value.color,\n                color: '#fff',\n                display: 'block',\n                // float: 'left',\n                margin: '2px',\n                width: '160px',\n                height: '20px',\n                padding: '3px',\n                cursor: 'pointer',\n                borderRadius: '3px',\n              }}\n              onClick={addCardLabelButton}\n            >\n              {value.name}\n            </span>\n            <button\n              name={value.id}\n              onClick={deleteLabel}\n              style={{ float: 'right' }}\n            >\n              X\n            </button>\n          </div>\n        );\n      } else {\n        return (\n          <div key={i} style={{ display: 'flex' }}>\n            <span\n              // key={i}\n              className={el.color}\n              style={{\n                backgroundColor: el.color,\n                color: '#fff',\n                display: 'inline-block',\n                margin: '1px',\n                padding: '3px',\n                width: '160px',\n                height: '20px',\n                cursor: 'pointer',\n                borderRadius: '3px',\n              }}\n              onClick={selectButton}\n            ></span>\n          </div>\n        );\n      }\n    });\n  };\n  return (\n    <div className='add-card-label-button'>\n      <button onClick={openLabelButton}>Label</button>\n      {openLabel ? (\n        <div className='label-modal' style={{ overflow: 'auto' }}>\n          {newRenderColors()}\n          <div\n            className='label-form'\n            style={{ display: display ? 'block' : 'none' }}\n          >\n            <input\n              value={labelName}\n              onChange={onChangeHandler}\n              style={{\n                backgroundColor: selectColor,\n                width: '160px',\n                borderRadius: '3px',\n                color: selectColor === '' ? 'black' : '#fff',\n              }}\n              placeholder='title'\n            />\n            <button onClick={addBoardLabelButton}>Add Label</button>\n            <button onClick={handleDisplay}>Cancel</button>\n          </div>\n\n          <button\n            onClick={handleDisplay}\n            style={{ display: display ? 'none' : 'block' }}\n          >\n            Add Label\n          </button>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default Label;\n"]},"metadata":{},"sourceType":"module"}