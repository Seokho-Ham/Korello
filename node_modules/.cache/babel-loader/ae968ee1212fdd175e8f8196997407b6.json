{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import axios from'axios';var serverUrl='http://222.117.225.28:8080/api/v1';var accessToken='';var setAccessToken=function setAccessToken(token){accessToken=token;};axios.defaults.headers.common['Authorization']=\"Bearer \".concat(accessToken);//GET--------------------------------------------------------------------------------\nvar useGetApi=function useGetApi(method,uri,state1,state2){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState('loading'),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),code=_useState6[0],setCode=_useState6[1];useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$method,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios[method](serverUrl+uri);case 3:_yield$axios$method=_context.sent;_data=_yield$axios$method.data;if(_data.result_body){setData(_data.result_body);}setCode(_data.result_code);setLoading('finished');_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[state1,state2]);return[data,code,loading];};var useGetCardApi=function useGetCardApi(uri){var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),update=_useState8[0],setUpdate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tagList=_useState10[0],setTagList=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cardList=_useState12[0],setCardList=_useState12[1];useEffect(function(){var getCard=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$get,data,result_body,obj,tags,cards,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(serverUrl+uri);case 2:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;result_body=data.result_body;if(result_body.length>0){obj={};tags=[];cards=[];result_body.sort(function(a,b){return a.id-b.id;}).map(function(el){var cardObj={id:el.id,name:el.name,tagValue:el.tagValue,memberNames:el.memberNames,labels:el.labels,createDate:el.createDate,updateDate:el.updateDate};if(!obj[el.tagValue]){obj[el.tagValue]=[cardObj];}else{obj[el.tagValue].push(cardObj);}});for(i in obj){tags.push(i);cards.push(obj[i]);}setTagList(tags);setCardList(cards);}else{setTagList([]);setCardList([]);}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function getCard(){return _ref2.apply(this,arguments);};}();getCard();},[update]);return[tagList,cardList,setUpdate];};//POST--------------------------------------------------------------------------------\nvar usePostApi=function usePostApi(){var postData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(uri,body){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(serverUrl+uri,body);case 3:_yield$axios$post=_context3.sent;data=_yield$axios$post.data;return _context3.abrupt(\"return\",data.result_code);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function postData(_x,_x2){return _ref3.apply(this,arguments);};}();return[postData];};//UPDATE--------------------------------------------------------------------------------\nvar useUpdateApi=function useUpdateApi(){var updateData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url,body){var _yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.put(serverUrl+url,body);case 3:_yield$axios$put=_context4.sent;data=_yield$axios$put.data;if(!data){_context4.next=7;break;}return _context4.abrupt(\"return\",data.result_code);case 7:_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function updateData(_x3,_x4){return _ref4.apply(this,arguments);};}();return[updateData];};//DELETE-------------------------------------------------------------------------------\nvar useDeleteApi=function useDeleteApi(){var deleteData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(url){var _yield$axios$delete,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.delete(serverUrl+url);case 3:_yield$axios$delete=_context5.sent;data=_yield$axios$delete.data;if(!data){_context5.next=7;break;}return _context5.abrupt(\"return\",data.result_code);case 7:_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,9]]);}));return function deleteData(_x5){return _ref5.apply(this,arguments);};}();return[deleteData];};export{useGetApi,useGetCardApi,usePostApi,useUpdateApi,useDeleteApi,setAccessToken};","map":{"version":3,"sources":["/Users/cocoball/Korello/src/api/index.js"],"names":["useState","useEffect","axios","serverUrl","accessToken","setAccessToken","token","defaults","headers","common","useGetApi","method","uri","state1","state2","data","setData","loading","setLoading","code","setCode","getData","result_body","result_code","console","log","useGetCardApi","update","setUpdate","tagList","setTagList","cardList","setCardList","getCard","get","length","obj","tags","cards","sort","a","b","id","map","el","cardObj","name","tagValue","memberNames","labels","createDate","updateDate","push","i","usePostApi","postData","body","post","useUpdateApi","updateData","url","put","useDeleteApi","deleteData","delete"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst serverUrl = 'http://222.117.225.28:8080/api/v1';\nlet accessToken = '';\nconst setAccessToken = token => {\n  accessToken = token;\n};\n\naxios.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\n\n//GET--------------------------------------------------------------------------------\nconst useGetApi = (method, uri, state1, state2) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState('loading');\n  const [code, setCode] = useState(0);\n\n  useEffect(() => {\n    const getData = async () => {\n      try {\n        let { data } = await axios[method](serverUrl + uri);\n\n        if (data.result_body) {\n          setData(data.result_body);\n        }\n        setCode(data.result_code);\n        setLoading('finished');\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getData();\n  }, [state1, state2]);\n  return [data, code, loading];\n};\n\nconst useGetCardApi = uri => {\n  const [update, setUpdate] = useState(false);\n  const [tagList, setTagList] = useState([]);\n  const [cardList, setCardList] = useState([]);\n\n  useEffect(() => {\n    const getCard = async () => {\n      let { data } = await axios.get(serverUrl + uri);\n\n      let { result_body } = data;\n\n      if (result_body.length > 0) {\n        const obj = {};\n        const tags = [];\n        const cards = [];\n        result_body\n          .sort((a, b) => a.id - b.id)\n          .map(el => {\n            let cardObj = {\n              id: el.id,\n              name: el.name,\n              tagValue: el.tagValue,\n              memberNames: el.memberNames,\n              labels: el.labels,\n              createDate: el.createDate,\n              updateDate: el.updateDate,\n            };\n\n            if (!obj[el.tagValue]) {\n              obj[el.tagValue] = [cardObj];\n            } else {\n              obj[el.tagValue].push(cardObj);\n            }\n          });\n\n        for (let i in obj) {\n          tags.push(i);\n          cards.push(obj[i]);\n        }\n\n        setTagList(tags);\n        setCardList(cards);\n      } else {\n        setTagList([]);\n        setCardList([]);\n      }\n    };\n    getCard();\n  }, [update]);\n\n  return [tagList, cardList, setUpdate];\n};\n\n//POST--------------------------------------------------------------------------------\nconst usePostApi = () => {\n  const postData = async (uri, body) => {\n    try {\n      let { data } = await axios.post(serverUrl + uri, body);\n\n      return data.result_code;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return [postData];\n};\n\n//UPDATE--------------------------------------------------------------------------------\nconst useUpdateApi = () => {\n  const updateData = async (url, body) => {\n    try {\n      const { data } = await axios.put(serverUrl + url, body);\n\n      if (data) {\n        return data.result_code;\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return [updateData];\n};\n\n//DELETE-------------------------------------------------------------------------------\nconst useDeleteApi = () => {\n  const deleteData = async url => {\n    try {\n      const { data } = await axios.delete(serverUrl + url);\n\n      if (data) {\n        return data.result_code;\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return [deleteData];\n};\n\nexport {\n  useGetApi,\n  useGetCardApi,\n  usePostApi,\n  useUpdateApi,\n  useDeleteApi,\n  setAccessToken,\n};\n"]},"metadata":{},"sourceType":"module"}