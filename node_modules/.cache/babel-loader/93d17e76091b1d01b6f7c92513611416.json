{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cocoball/Korello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,memo,useCallback}from'react';import AddCardButton from'./AddCardButton';import CardListForm from'./CardListForm';import{useUpdateApi}from'../../api/index';import{useDrop}from'react-dnd';var TagForm=function TagForm(_ref){var data=_ref.data,tag=_ref.tag,boardUrl=_ref.boardUrl,setUpdate=_ref.setUpdate;var _useUpdateApi=useUpdateApi(),_useUpdateApi2=_slicedToArray(_useUpdateApi,1),updateData=_useUpdateApi2[0];var appendItem=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item){var code;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(item.tagValue!==tag)){_context.next=5;break;}_context.next=3;return updateData(boardUrl.slice(0,boardUrl.length-1)+'/tag',{id:item.id,tagValue:tag});case 3:code=_context.sent;if(code===200){setUpdate(function(p){return!p;});}else{alert('이동 실패');}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());var _useDrop=useDrop({accept:'card',drop:appendItem,collect:function collect(monitor){return{hovered:monitor.isOver()};}}),_useDrop2=_slicedToArray(_useDrop,2),hovered=_useDrop2[0].hovered,drop=_useDrop2[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"tag\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tag-header\",children:tag}),/*#__PURE__*/_jsxs(\"div\",{className:\"drop-area \".concat(hovered?'drop-area-hovered':''),ref:drop,children:[console.log(data),data.sort(function(a,b){return a.id-b.id;}).map(function(el){return/*#__PURE__*/_jsx(CardListForm,{id:el.id,title:el.name,memberNames:el.memberNames,labels:el.labels,tag:tag,url:boardUrl,setUpdate:setUpdate},el.id);})]}),/*#__PURE__*/_jsx(AddCardButton,{tag:tag,url:boardUrl,setUpdate:setUpdate})]});};export default/*#__PURE__*/memo(TagForm);","map":{"version":3,"sources":["/Users/cocoball/Korello/src/components/card/TagForm.jsx"],"names":["React","useState","memo","useCallback","AddCardButton","CardListForm","useUpdateApi","useDrop","TagForm","data","tag","boardUrl","setUpdate","updateData","appendItem","item","tagValue","slice","length","id","code","p","alert","accept","drop","collect","monitor","hovered","isOver","console","log","sort","a","b","map","el","name","memberNames","labels"],"mappings":"+fAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,IAA1B,CAAgCC,WAAhC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,YAAT,KAA6B,iBAA7B,CACA,OAASC,OAAT,KAAwB,WAAxB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAwC,IAArCC,CAAAA,IAAqC,MAArCA,IAAqC,CAA/BC,GAA+B,MAA/BA,GAA+B,CAA1BC,QAA0B,MAA1BA,QAA0B,CAAhBC,SAAgB,MAAhBA,SAAgB,mBACjCN,YAAY,EADqB,gDAC/CO,UAD+C,mBAGtD,GAAMC,CAAAA,UAAU,CAAGX,WAAW,2FAAC,iBAAMY,IAAN,gIACzBA,IAAI,CAACC,QAAL,GAAkBN,GADO,gDAERG,CAAAA,UAAU,CAC3BF,QAAQ,CAACM,KAAT,CAAe,CAAf,CAAkBN,QAAQ,CAACO,MAAT,CAAkB,CAApC,EAAyC,MADd,CAE3B,CACEC,EAAE,CAAEJ,IAAI,CAACI,EADX,CAEEH,QAAQ,CAAEN,GAFZ,CAF2B,CAFF,QAErBU,IAFqB,eAS3B,GAAIA,IAAI,GAAK,GAAb,CAAkB,CAChBR,SAAS,CAAC,SAAAS,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CAFD,IAEO,CACLC,KAAK,CAAC,OAAD,CAAL,CACD,CAb0B,sDAAD,gEAA9B,CAHsD,aAoB1Bf,OAAO,CAAC,CAClCgB,MAAM,CAAE,MAD0B,CAElCC,IAAI,CAAEV,UAF4B,CAGlCW,OAAO,CAAE,iBAAAC,OAAO,CAAI,CAClB,MAAO,CACLC,OAAO,CAAED,OAAO,CAACE,MAAR,EADJ,CAAP,CAGD,CAPiC,CAAD,CApBmB,sCAoB7CD,OApB6C,cAoB7CA,OApB6C,CAoBlCH,IApBkC,cA8BtD,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,YAAf,UAA6Bd,GAA7B,EADF,cAEE,aACE,SAAS,qBAAeiB,OAAO,CAAG,mBAAH,CAAyB,EAA/C,CADX,CAEE,GAAG,CAAEH,IAFP,WAIGK,OAAO,CAACC,GAAR,CAAYrB,IAAZ,CAJH,CAKGA,IAAI,CACFsB,IADF,CACO,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAACb,EAAF,CAAOc,CAAC,CAACd,EAAnB,EADP,EAEEe,GAFF,CAEM,SAAAC,EAAE,CAAI,CACT,mBACE,KAAC,YAAD,EAEE,EAAE,CAAEA,EAAE,CAAChB,EAFT,CAGE,KAAK,CAAEgB,EAAE,CAACC,IAHZ,CAIE,WAAW,CAAED,EAAE,CAACE,WAJlB,CAKE,MAAM,CAAEF,EAAE,CAACG,MALb,CAME,GAAG,CAAE5B,GANP,CAOE,GAAG,CAAEC,QAPP,CAQE,SAAS,CAAEC,SARb,EACOuB,EAAE,CAAChB,EADV,CADF,CAYD,CAfF,CALH,GAFF,cAwBE,KAAC,aAAD,EAAe,GAAG,CAAET,GAApB,CAAyB,GAAG,CAAEC,QAA9B,CAAwC,SAAS,CAAEC,SAAnD,EAxBF,GADF,CA4BD,CA1DD,CA4DA,2BAAeV,IAAI,CAACM,OAAD,CAAnB","sourcesContent":["import React, { useState, memo, useCallback } from 'react';\nimport AddCardButton from './AddCardButton';\nimport CardListForm from './CardListForm';\nimport { useUpdateApi } from '../../api/index';\nimport { useDrop } from 'react-dnd';\n\nconst TagForm = ({ data, tag, boardUrl, setUpdate }) => {\n  const [updateData] = useUpdateApi();\n\n  const appendItem = useCallback(async item => {\n    if (item.tagValue !== tag) {\n      const code = await updateData(\n        boardUrl.slice(0, boardUrl.length - 1) + '/tag',\n        {\n          id: item.id,\n          tagValue: tag,\n        },\n      );\n      if (code === 200) {\n        setUpdate(p => !p);\n      } else {\n        alert('이동 실패');\n      }\n    }\n  });\n\n  const [{ hovered }, drop] = useDrop({\n    accept: 'card',\n    drop: appendItem,\n    collect: monitor => {\n      return {\n        hovered: monitor.isOver(),\n      };\n    },\n  });\n\n  return (\n    <div className='tag'>\n      <div className='tag-header'>{tag}</div>\n      <div\n        className={`drop-area ${hovered ? 'drop-area-hovered' : ''}`}\n        ref={drop}\n      >\n        {console.log(data)}\n        {data\n          .sort((a, b) => a.id - b.id)\n          .map(el => {\n            return (\n              <CardListForm\n                key={el.id}\n                id={el.id}\n                title={el.name}\n                memberNames={el.memberNames}\n                labels={el.labels}\n                tag={tag}\n                url={boardUrl}\n                setUpdate={setUpdate}\n              />\n            );\n          })}\n      </div>\n      <AddCardButton tag={tag} url={boardUrl} setUpdate={setUpdate} />\n    </div>\n  );\n};\n\nexport default memo(TagForm);\n"]},"metadata":{},"sourceType":"module"}